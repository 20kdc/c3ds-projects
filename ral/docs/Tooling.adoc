## RAL Tooling Reference

The RAL compiler is a Java command-line application, and therefore is run via `java -jar ral.jar`.

It is designed for use in simple build systems, and injection, for rapid iteration similar to CAOS Tool.

### Subcommands

#### compile, compileDebug, compileInstall, compileEvents, compileRemove

The `compile` subcommand, and it's friends `compileDebug`, `compileInstall`, `compileEvents`, and `compileRemove`, make up the principal method of writing RAL scripts.

These are of the form `compile INPUT OUTPUT`, where `INPUT` is a RAL source file, and `OUTPUT` is the file to write CAOS to.

For example, `java -jar ral.jar compile teddy.ral teddy.cos`.

The usual `compile` variant is a 1:1 compilation of a RAL file to an equivalent Bootstrap-style file (install script, then event scripts, then remove script).

The `compileInstall` variant only compiles the install script, the `compileEvents` script only compiles the event scripts, and the `compileRemove` script only compiles the remove script (without the `rscr` header, so this is suitable for agent remove scripts).

`compileDebug` is `compile` but it writes additional metadata.

#### inject, injectEvents, injectRemove

The `inject` subcommand, and it's friends `injectEvents` and `injectRemove`, perform a CAOS injection over CPX (which requires having `caosprox` running).

The sole parameter is the RAL file to inject.

`inject` injects the event scripts and the install script, while `injectEvents` and `injectRemove` inject only the event scripts and the remove script respectively.

#### lsp, lspLog

`lsp` and `lspLog` make up a Language Server Protocol implementation "over stdio" (standard input/output).

In sensible (Vim, Kate, lite-xl, Qt Creator) implementations of the Language Server Protocol, either of these may be used in LSP server launch commands used to enable completion, definition lookup, and live diagnostics.

In insane (Lapce, Visual Studio Code) implementations, more work is required.

_LSP support is not currently tested with paths that contain spaces, LSP clients other than lite-xl, or the Windows operating system._

#### cpxConnectionTest

The `cpxConnectionTest` subcommand is used to test injection.

### Standard Library Location

In JAR form, the RAL compiler expects the `include` directory to be nearby (either in the same directory as the JAR file or in the immediate parent directory).

To override this, the environment variable `RAL_STDLIB_PATH` may be set.

_This environment variable should not need to be used under regular conditions. It exists as an emergency mechanism in the event that RAL standard library autodetection does not succeed. `RAL_STDLIB_PATH` is not a toy, and custom modifications of any kind directly to the RAL standard library may make it harder to update to future versions of RAL, and may make it harder for code to be reused or compiled on new installations._
